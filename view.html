<!DOCTYPE html>
<html lang="en">
    <body style="height:100%">
        <script>
        var id = window.location.search.split('=')[1];
        async function fetchPopularFilms() {
            try{
                const response = await fetch('https://film.r2.csec.top/films/'+id+'/index.json')
                    if (!response.ok) {
                        throw new Error(`HTTP error! status: ${response.status}`);
                    }
                    const data = await response.clone().json();
                if (id == 'undefined' || id == null) {
                    window.location.href = "index.html";
                }else {
                    var vidsize = data.vidsize;
                    //vidsize is a list of video sizes
                    lst = document.getElementById("lst");
                    for (let i = 0; i < vidsize.length; i++) {
                       let button = document.createElement("button");
                       button.innerHTML = vidsize[i];
                       button.onclick = function() {
                          var url = "m3u8.html?id=" + id + "&vidsize=" + vidsize[i];
                          window.open(url);
                        };
                        lst.appendChild(button);
                    }
                }
            } catch (error) {
                console.error('Error fetching popular films:', error);
            }
        }
        fetchPopularFilms()
        </script>
<!--         <iframe id="vidcontainor" src="" style="height:90%;width:100%;"></iframe> -->
        <div id="lst" style="width:100%;height:10%;overflow-x:auto;white-space:nowrap;"></div>
    </body>
</html>
